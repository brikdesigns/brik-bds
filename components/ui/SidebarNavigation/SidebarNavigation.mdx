import { Canvas, Meta } from '@storybook/blocks';
import * as SidebarNavigationStories from './SidebarNavigation.stories';

<Meta of={SidebarNavigationStories} />

# SidebarNavigation

Fixed-position sidebar navigation component with logo, navigation items, footer actions, and user section.

## Features

- **Logo Section**: Display your brand logo at the top
- **Navigation Items**: List of links with active state indicators
- **Footer Actions**: Optional action buttons (e.g., "View as Client")
- **User Section**: User info and account actions
- **BDS Tokens**: Uses design system tokens for theming
- **Responsive**: Fixed positioning with configurable width

## Framework Compatibility

| Framework | Compatible | Notes |
|-----------|-----------|-------|
| **Next.js 14+ (App Router)** | ✅ Yes | Wrap in 'use client' component for Link integration |
| **Next.js (Pages Router)** | ✅ Yes | Direct usage supported |
| **React 18+** | ✅ Yes | Standard React component |
| **Remix** | ✅ Yes | Works with Remix Link |

### Next.js Integration Pattern

```tsx
'use client';

import Link from 'next/link';
import { usePathname } from 'next/navigation';
import { SidebarNavigation, type SidebarNavItem } from '@bds/components/ui/SidebarNavigation';

export function AdminSidebar() {
  const pathname = usePathname();

  const navItems: SidebarNavItem[] = [
    { label: 'Dashboard', href: '/admin', active: pathname === '/admin' },
    { label: 'Users', href: '/admin/users', active: pathname.startsWith('/admin/users') },
  ];

  return (
    <SidebarNavigation
      logo={<Link href="/"><YourLogo /></Link>}
      navItems={navItems}
      footerActions={<Button>Action</Button>}
      userSection={<UserInfo />}
    />
  );
}
```

## Usage

### Basic

```tsx
import { SidebarNavigation } from '@bds/components/ui/SidebarNavigation';

<SidebarNavigation
  logo={<img src="/logo.svg" alt="Logo" />}
  navItems={[
    { label: 'Dashboard', href: '/dashboard', active: true },
    { label: 'Settings', href: '/settings' },
  ]}
/>
```

### With Footer Actions and User Section

```tsx
<SidebarNavigation
  logo={<YourLogo />}
  navItems={navItems}
  footerActions={<Button variant="secondary">View as Client</Button>}
  userSection={
    <>
      <p>John Doe</p>
      <SignOutButton />
    </>
  }
/>
```

## Props

### SidebarNavigation

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `logo` | `ReactNode` | required | Logo element to display at top |
| `navItems` | `SidebarNavItem[]` | required | Navigation items array |
| `footerActions` | `ReactNode` | - | Optional footer action buttons |
| `userSection` | `ReactNode` | - | Optional user info section |
| `width` | `string` | `'260px'` | Optional custom width |

### SidebarNavItem

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `label` | `string` | required | Item label |
| `href` | `string` | required | Link href |
| `active` | `boolean` | `false` | Whether this item is currently active |
| `icon` | `ReactNode` | - | Optional icon element |

## Design Tokens

**Surface:**
- `--_color---surface--primary` - Sidebar background
- `--_color---border--secondary` - Border and dividers

**Text:**
- `--_color---text--primary` - Active item text
- `--_color---text--secondary` - Default item text

**Active State:**
- `--_color---page--secondary` - Active item background
- `--brand--primary` - Active indicator dot

## Integration Checklist

Before using SidebarNavigation in your project:

- [ ] Wrap in `'use client'` component if using Next.js App Router
- [ ] Integrate with your routing library (Next.js Link, React Router, etc.)
- [ ] Implement active state detection (usePathname, useLocation, etc.)
- [ ] Test keyboard navigation
- [ ] Verify responsive behavior on mobile

## Common Issues

**Issue:** Links don't navigate in Next.js
**Solution:** Wrap logo and implement navigation with Next.js Link component (see pattern above)

**Issue:** Active state not updating
**Solution:** Use `usePathname()` or similar to derive active state from current route

## Examples

<Canvas of={SidebarNavigationStories.Default} />
