/**
 * Storybook Overrides
 *
 * This file ensures Webflow CSS doesn't leak into Storybook's own UI
 * and applies immersive theming to the docs page.
 * Import this AFTER the Webflow CSS to override any conflicts.
 */

/* ============================================
   CODE BLOCK STYLING - Override blue backgrounds
   ============================================ */

/* Target all code-related elements - using design tokens */
pre,
code,
.docblock-source,
.docblock-code-toggle,
.docs-story pre,
.docs-story code,
[class*="docblock"] pre,
[class*="docblock"] code,
.sbdocs pre,
.sbdocs code,
.sb-story pre,
.sb-story code,
div[class*="Source"] pre,
div[class*="Source"] code,
.prismjs,
[class*="language-"] {
  background-color: var(--grayscale--darkest, #333) !important;
  color: var(--grayscale--lightest, #f2f2f2) !important;
  font-family: ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, monospace !important;
}

/* Ensure pre blocks don't inherit brand colors */
pre[class*="language-"],
code[class*="language-"] {
  background: var(--grayscale--darkest, #333) !important;
  color: var(--grayscale--lightest, #f2f2f2) !important;
  text-shadow: none !important;
}

/* ============================================
   PREVIEW CANVAS — Themed backgrounds

   Theme classes (.body.theme-X) are applied to the preview
   <body> by the decorator's useEffect, making --_color---*
   variables available to the entire preview iframe.
   ============================================ */

/* Reset Storybook preview canvas */
.sb-show-main,
.sb-main-padded,
#storybook-root,
#storybook-docs,
.sbdocs-wrapper,
.sbdocs-content {
  border: none !important;
  border-radius: 0 !important;
  box-shadow: none !important;
}

/* Canvas mode: themed background, full height */
.sb-show-main,
#storybook-root {
  background-color: var(--_color---page--primary, #fff) !important;
  color: var(--_color---text--primary, #333) !important;
  min-height: 100vh;
}

/* Docs mode: themed background on wrapper + content */
#storybook-docs,
.sbdocs-wrapper,
.sbdocs.sbdocs-wrapper,
.sbdocs-content {
  background-color: var(--_color---page--primary, #fff) !important;
  color: var(--_color---text--primary, #333) !important;
}

/* ============================================
   DOCS MODE — Seamless story blocks

   In docs mode, stories render directly (no ThemeWrapper).
   The body carries .body.theme-X for CSS variables.

   Storybook wraps each story in containers with CSS Modules
   hashed class names (e.g. div.css-xzp052). The old
   div[class*="docs-story"] selector doesn't match these.

   We use structural selectors targeting the anchor IDs that
   Storybook generates for each story block, plus a broad
   css-module catch-all within #storybook-docs.
   ============================================ */

/* SB7 compat — literal class name (if present) */
div[class*="docs-story"] {
  background: transparent !important;
  padding: 0 !important;
  border: none !important;
  border-radius: 0 !important;
  box-shadow: none !important;
}

/* SB8 — story anchor containers use stable ID pattern:
   #anchor--components-button--base > div.css-HASH */
#storybook-docs [id^="anchor--"] > div {
  background: transparent !important;
  padding: 0 !important;
  border: none !important;
  border-radius: 0 !important;
  box-shadow: none !important;
}

/* Inner story wrapper (one level deeper) */
#storybook-docs [id^="anchor--"] > div > div {
  background: transparent !important;
  padding: 0 !important;
}

/* Catch-all: any CSS-modules div inside story anchors */
#storybook-docs [id^="anchor--"] div[class^="css-"] {
  background: transparent !important;
  border: none !important;
  border-radius: 0 !important;
  box-shadow: none !important;
}

/* Reset the .body class border from Webflow CSS
   (applies to <body> which gets class "body" from useEffect) */
.body {
  border: none !important;
  border-radius: 0 !important;
}

/* ============================================
   IMMERSIVE DOCS THEMING

   These rules theme the docs page chrome (headings, text,
   args table, TOC) to match the selected theme. Combined
   with body-level theme classes, this gives a fully immersive
   theming experience similar to Carbon Design System.
   ============================================ */

/* Docs headings — theme heading font + color */
.sbdocs h1,
.sbdocs h2,
.sbdocs h3,
.sbdocs h4 {
  color: var(--_color---text--primary) !important;
  font-family: var(--_typography---font-family--heading, inherit) !important;
}

/* Docs body text */
.sbdocs p,
.sbdocs li {
  color: var(--_color---text--secondary) !important;
  font-family: var(--_typography---font-family--body, inherit) !important;
}

/* Docs links — brand color (exclude code block and anchor links) */
.sbdocs a:not([class*="docblock"]):not([class*="anchor"]) {
  color: var(--_color---text--brand) !important;
}

/* Description / subtitle blocks */
div[class*="Description"],
div[class*="Subtitle"] {
  color: var(--_color---text--secondary) !important;
}

/* Args/props table */
div[class*="ArgTypes"] table,
.docblock-argstable {
  background: var(--_color---surface--secondary, #f2f2f2) !important;
}

div[class*="ArgTypes"] th,
div[class*="ArgTypes"] td {
  color: var(--_color---text--primary) !important;
  border-color: var(--_color---border--secondary) !important;
}

div[class*="ArgTypes"] td span,
div[class*="ArgTypes"] td p {
  color: var(--_color---text--secondary) !important;
}

/* TOC (table of contents) in docs sidebar */
.sbdocs [class*="toc"] a {
  color: var(--_color---text--secondary) !important;
}

.sbdocs [class*="toc"] a:hover,
.sbdocs [class*="toc"] a[data-active="true"] {
  color: var(--_color---text--brand) !important;
}

/* Show/hide code toggle button */
div[class*="Source"] button,
.docblock-code-toggle {
  color: var(--_color---text--muted) !important;
}

/* ============================================
   SPACING MODE - Reset to Base mode (not Spacious)

   The .body class in Webflow CSS applies "Spacious" mode by default.
   We override to use "Base" mode values from :root for Storybook.

   Base mode spacing scale (updated 2026-02-18):
   - tiny: 8px   (space--200)
   - xs:   10px  (space--250)
   - sm:   12px  (space--300)
   - md:   16px  (space--400)
   - lg:   24px  (space--600)
   - xl:   32px  (space--800)
   - huge: 48px  (space--1200)
   ============================================ */

.body {
  /* Padding tokens - Base mode */
  --_space---none: var(--space--0);
  --_space---tiny: var(--space--200);
  --_space---xs: var(--space--250);
  --_space---sm: var(--space--300);
  --_space---md: var(--space--400);
  --_space---lg: var(--space--600);
  --_space---xl: var(--space--800);
  --_space---xxl: var(--space--800); /* deprecated — alias for xl */
  --_space---huge: var(--space--1200);

  /* Gap tokens - Base mode */
  --_space---gap--none: var(--space--0);
  --_space---gap--tiny: var(--space--50);
  --_space---gap--xs: var(--space--100);
  --_space---gap--sm: var(--space--150);
  --_space---gap--md: var(--space--200);
  --_space---gap--lg: var(--space--400);
  --_space---gap--xl: var(--space--600);
  --_space---gap--xxl: var(--space--600); /* deprecated — alias for gap--xl */
  --_space---gap--huge: var(--space--800);

  /* Component-specific spacing - Base mode */
  --_space---button: var(--space--200);
  --_space---input: var(--space--200);
}

/* ============================================
   SYNTAX HIGHLIGHTING - Fix token colors
   ============================================ */

.token.tag { color: #569cd6 !important; background: transparent !important; }
.token.attr-name { color: #9cdcfe !important; background: transparent !important; }
.token.attr-value { color: #ce9178 !important; background: transparent !important; }
.token.punctuation { color: #d4d4d4 !important; background: transparent !important; }
.token.string { color: #ce9178 !important; background: transparent !important; }
.token.keyword { color: #c586c0 !important; background: transparent !important; }
.token.function { color: #dcdcaa !important; background: transparent !important; }
.token.operator { color: #d4d4d4 !important; background: transparent !important; }
.token.comment { color: #6a9955 !important; background: transparent !important; }

/* ============================================
   STORYBOOK UI - Protect from Webflow styles
   ============================================ */

/* Toolbar and sidebar shouldn't inherit Webflow styles */
.sb-bar,
[class*="sidebar"],
[class*="tabbutton"],
button[class*="IconButton"],
.sidebar-container,
nav[class*="sidebar"] {
  background-color: inherit !important;
  border-color: inherit !important;
}
